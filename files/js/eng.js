(function(){var Z=function(x){var t=typeof(x),k;if(t=="string"){return 0}if(t=="boolean"){return 1}if(t=="number"){return 2}if(x instanceof Array){return 3}if(t=="object"){for(k in x){return 4}}return false};var Y=function(o,d,j,c,f){var n=o.childNodes,L=n.length,i,e,p,i=0,a,b=c.n;if(f){e=o.getAttribute("e-for");if(e){e=e.trim();e?(c.n++,j[e]={a:c.n,b:-1},a=j[e],d.push([e,a,o]),j=j[e],b=0):null}}while(i<L){if(n[i].nodeType==1){e=n[i].getAttribute("e-for"),p=1;if(e){e=e.trim();e?(c.n++,j[e]={a:c.n,b:b},a=j[e],d.push([e,a,n[i]]),Y(n[i],d,a,c),p=0):null}p?Y(n[i],d,j,c):null}i++}};var X=function(o,a){var L=a.length;while(L--){if(o==a[L]){break}}return L};var W=function(b,s,e){var a=[],L=b.length,i=0;e?null:e=L;while(s<e){a[i]=b[s],s++,i++}return a};var V=function(d,a,c){var L=d.length,i=0,s="",b=".";c!=undefined?L=c:null;while(i<L){if(i==L-1){b=""}a?s+=d[i]:s+=(d[i]+b),i++}return s};var U={"$_a":1,"$_b":1,"$_c":1,"$_d":1,"$_e":1,"$_f":1,"$_g":1,"$_h":1,"$_i":1};var T=function(a,b,c){var k,v;for(k in b){v=b[k],v instanceof Array?(a[k]=[],S(a[k],v,c)):(U[k]?null:(a[k]={},T(a[k],v,c)))}};var S=function(a,b,c){var L=b.length,k,v;while(L--){v=b[L],a[L]={},a[L].$_a=v.$_a,a[L].$_b=v.$_b,a[L].$_d=c[v.$_c],a[L].$_h=c[v.$_i],a[L].$_e=c[v.$_g],a[L].$_f=v.$_f;for(k in v){if(!U[k]){a[k]={},T(a[k],v,c)}}}};var R=function(a,b){var L,d=b.length,i,e,f,g=[],c;while(d--){L=b[d].length,i=0,e=0;while(i<L){if(a[i]==b[d][i]){e++}else{break}i++}g[d]=e}L=g.length,e=-1,i=0;while(L--){g[L]?(g[L]>i?(i=g[L],e=L):null):null}if(e==-1){return}b=W(a,g[e]-1),i=0,L=b.length,g=[],f=-1;while(i<L){c=b[i];if(c){b[i+1]!=undefined?g.push(b[i+1]):null,f++}else{break}i+=2}if(f!=-1){return{n:f,b:e,c:g}}};var Q=function(a){if(!a){return}var L=a.length,b=[],c;if(L){while(L--){c=a[L].name;if(!N.c.test(c)){b.push([a[L].name,a[L].value])}}return b}else{return null}};var P=function(a,b,c){var d,e,f,g,L,i=0,h=0;b?null:(b={},c=[]),e=a.nodeName,b.a={},b.a.a=e,b.a.b=Q(a.attributes),c.push(a),d=a.childNodes;if(d){L=d.length}else{return}b.c=[];while(i<L){f=d[i].nodeType,f===1?(b.c[h]={},P(d[i],b.c[h],c),h++):null,f===3?(g=d[i].textContent.trim(),g?(g=g.replace(N.e,""),b.c[h]=g,h++,c.push(d[i])):null):null,i++}return[b,c]};var O=function(a,b,c,d){var e,f,g=a.c,h,j,k,i,L;e=a.a.a,h=document.createElement(e),f=a.a.b;if(f){L=f.length;while(L--){h.setAttribute(f[L][0],f[L][1])}}d?b.appendChild(h):c=[],c.push(h);if(!g){return}L=g.length,i=0;while(i<L){j=g[i];if(Z(j)==0){k=document.createTextNode(j),c.push(k),h.appendChild(k)}else{O(j,h,c,1)}i++}return[h,c]};var N={a:/(\{\{[^{}]+\}\})/,b:/({{|}})/g,c:/^(e\-)/,d:/(\>\=|\<\=|\>|\<|\=\=\=|\=\=|\=)/,e:/(\{\{[^{}]+\}\})/g,};var M=function(s){var a=[],L=s.length,i=0,c,t="",f=1,k,g,o,b;while(i<L){c=s[i];if(f&&c=="="){a.push(t),a.push(c),t="",f=0,k=1,i++;continue}if(k&&c=="?"){t=t.split(N.d),o=t.length,b=0;while(b<o){a.push(t[b]),b++}t="",k=0,a.push(c),g=1,i++,o=i;continue}if(g&&c==")"&&s[i+1]==":"){a.push(s.slice(o+1,i)),a.push(":"),a.push(s.slice(i+3,-1));break}t+=c,i++;if(i==L){a.push(t)}}return a};var L={"=":0,"==":0,"===":0,">=":1,"<=":2,">":3,"<":4,};var K=function(s){var v=L[s];return v};var J=function(a){var b=M(a),L=b.length,i=0,c=[];if(L>2){L=b.length,c.push(b[2].replace(N.b,"").trim());if(L==9){c.push(K(b[3]))}while(i<L){i%2||i==2?null:c.push(b[i].trim()),i++}return c}return};var I=function(a){var c=[],v,b=a.split(";"),L=b.length;while(L--){v=J(b[L]);if(v){c.push(v)}}if(c.length){return c}return};var H=function(a,b,c){var d=a.getAttribute("e-attr"),L;if(d){d=d.trim(),a.removeAttribute("e-attr");if(d){d=I(d);if(d){L=d.length;while(L--){if(!b[d[L][0]]){b[d[L][0]]=[]}b[d[L][0]].push({$_e:a,$_g:c?X(a,c):null,$_f:W(d[L],0)})}}}}return};var F=function(a,b,c){var e=a.getAttribute("e-html"),d;if(e){d=e.trim(),a.removeAttribute("e-html");if(d){if(!b[d]){b[d]=[]}b[d].push({$_h:a,$_i:c?X(a,c):null,});return false}}return true};var E=function(s){var o=document.createDocumentFragment();var d=document.createElement("div");d.innerHTML=s.trim();var c=d.childNodes,L=c.length,i=0;while(i<L){o.appendChild(c[0]);i++}return o};var G=function(o,a){var i,c;if(o){i=o.length;while(i--){c=a[o[i][0]].d,G(c,a);delete a[o[i][0]]}}};Eng=function(b){var t=this,a,c;t.r=true,t.s=-1,t.t={},t.u=[],t.v=[],t.w=[],t.x={0:1,2:1,1:1},t.y=[[]],t.z=b.data?b.data:{},t.a();t.A={$_data:t.z,$_setToSelf:t.C,$_setToGlobal:t.D,$_watcher:t.E,$_watcherFor:t.F},t.B={};if(b.el){c=Z(b.el),c?(t.d(b.el,0)):(c=E(b.el),t.A.$_el=c,t.d(c,t.t))}if(b.watcher){t.b(b.watcher)}if(b.watcherFor){t.c(b.watcherFor)}a=[],t.h(t.z,a,1),a=null;if(b.created){b.created(t.A)}return t.z};Eng.prototype.a=function(){var a=this;a.C=function(b,c){var j={},d=Z(c)==0?E(c):c;a.d(d,j,true);a.h(b,[],0,j,b);j=null;return d};a.D=function(v){var j=a.t,f=true,d=a.z,t=Z(v.el),r,b,i,L;v.base?b=v.base.trim():b="";if(t==0){v.el=E(v.el)}if(b){i=0,r=b.split("."),L=r.length;while(i<L){j=j[r[i]],d=d[r[i]],i++}t=Z(v.value);if(!a.x[t]){j[v.key]={},j=j[v.key],b+="."+v.key}r.push(v.key)}else{r=[v.key],b=v.key,j[v.key]={},j=j[v.key]}d[v.key]=v.data,a.d(v.el,j,true,b),a.k(d,v.key,W(r,0),b,4),a.h(d[v.key],r,2),j=null,d=null;return v.el};a.E=function(o){a.b(o)};a.F=function(o){a.c(o)}};Eng.prototype.b=function(c){var a,v,d=this;d.G?null:d.G={};for(a in c){v=c[a];if(v){d.G[a.trim()]=v}}};Eng.prototype.c=function(c){var a,v,d=this;d.H?null:d.H={};for(a in c){v=c[a];if(v){d.H[a.trim()]=v}else{delete d.H[a.trim()]}}};Eng.prototype.d=function(a,b,c,d){if(!a)return;var e=a.childNodes,f,v,n,i=0,g,h,j,k,m,o,t=this,L=e.length;!b?(b=t.f(a,t.t,"",d),c=b[1],b=b[0]):null;if(!L){return}f=b;while(i<L){e[i]?n=e[i].nodeType:n=-1;if(n==3){v=e[i].nodeValue.trim();g=v.split(N.e);j=g.length;if(j>1){k=0,m=[],o=[];while(k<j){if(N.e.test(g[k])){m.push(k);h=g[k].replace(N.b,"");g[k]=h,o.push(h)}k++}j=o.length,k=0;while(k<j){if(!f[o[k]]){f[o[k]]=[]}f[o[k]].push({$_d:!t.I?e[i]:null,$_c:t.I?X(e[i],t.J):null,$_a:m,$_b:g});k++}}}else{if(n==1){b=t.f(e[i],f,c,d);t.r?t.d(e[i],b[0],b[1],d):null}}i++}};Eng.prototype.f=function(a,b,c,d){var e,f=1,L,i,g=1,z=this;z.r=1;e=a.getAttribute("e-base");if(e){e=e.trim(),a.removeAttribute("e-base");if(e){c?(c+="."+e):c+=e,b[e]={},b=b[e],f=0}}if(!d){e=a.getAttribute("e-for");if(e&&f){e=e.trim();if(e){z.I=1;g=0;z.s++;z.y[z.s]=[];z.w[z.s]=[];if(c){z.y[z.s]=c.split(".")}var h={},j=[],k={n:-1},forData=Y(a,j,h,k,1);L=j.length,i=0;var m,n,o,p,q,r,s,t,u,v=z.y[z.s],w,x;while(i<L){k={},t=[],u=[],r=i,s=0,m=j[i][1],n=j[i][0],q=j[i][2],o=m.a,p=m.b;if(i==0){m.c=q.parentNode,m.c.removeChild(q)}r++;while(r<L){j[r][1].b==o?(j[r][1].d=s,s++,u.push(r)):null,r++}r=s;while(r--){x=j[u[r]][2].parentNode,x.removeChild(j[u[r]][2]),t.push(x)}w=P(q),z.J=w[1],H(q,k,z.J),z.r=F(q,k,z.J);if(z.r){z.d(q,k,z.J)}s?m.e=[]:null;while(s--){m.e.push(X(t[s],z.J))}m.f=w[0],m.g=k,v.push(n);i++}z.B[z.s]={},k=null,t=null,u=null,z.u[z.s]=h,h=null,z.v[z.s]=j,j=null,z.I=0}}z.I?(H(a,b,z.J),z.r=F(a,b,z.J)):(H(a,b),z.r=F(a,b))}else{H(a,b);z.r=F(a,b)}e=a.getAttribute("e-id");if(e&&g&&!z.I){e=e.trim(),a.removeAttribute("e-id");if(e){z.A[e]=a}}return[b,c]};Eng.prototype.g=function(a){var t=this,b=R(a,t.y);if(!b){return}var c=t.t,g=t.z,i=0,L=a.length,d,e,f=L-1;L==1?d=c:null;while(i<L){c[a[i]]?c=c[a[i]]:(c[a[i]]={},c=c[a[i]]),g=g[a[i]],i==L-2?d=c:null,i++}L=g.length;if(Z(L)!=2){return}var h,j,k,m,n,o,p,q,r;h=b.n,j=b.b;if(t.y[j].indexOf(a[a.length-1])==-1){return}n=b.c,m=t.v[j][h][1],o=m.g,p=m.f,q=m.e,k=m.d;if(h){L=h;while(L--){r=t.w[j][L];if(r){n[L]=r.indexOf(Number(n[L]))}}}var s=t.y[j][h],u,v,w,x,y="$_"+j+h+s+V(n,1);if(t.H&&t.H[s]){v=t.H[s],i=0,u={},w=[],L=g.length;while(i<L){u={$_allow:true,$_data:g[i]},v(u),u.$_allow?w.push(i):null,i++}}t.w[j][h]=w;if(!t.B[j][y]){t.B[j][y]={a:[],b:[],c:[]}}x=t.B[j][y].a,v=t.B[j][y].b,u=t.B[j][y].c,r=t.B[j][y].d;if(r){L=r.length;w?(i=w.length):i=g.length;while(i<L){if(w){G(t.B[j][r[i][0]].d,t.B[j]);delete t.B[j][r[i][0]]}else{delete t.B[j][r[i][0]]}i++}}t.B[j][y].d=[];d[a[f]]={},c=d[a[f]];if(h){i=n.length,b="$_"+j+(h-1)+t.y[j][h-1]+V(n,1,i-1),s=t.B[j][b].c[n[i-1]][k],t.B[j][b].d.push([y,k])}else{s=m.c}var A=q?q.length:0,B,C,D,E,F=1;i=0,L=w?w.length:g.length,e=v.length,L>=e?i=e:null,e>=L?(F=0,i=L,L=e):null;while(i<L){if(F){C=O(p),v.push(C[0]);if(A){B=A,E=[];while(B--){E.push(C[1][q[B]])}u.push(E)}D={},T(D,o,C[1]),x.push(D),s.appendChild(C[0])}else{x.pop(),s.removeChild(v.pop()),u.pop()}i++}if(w){L=w.length;while(L--){c[w[L]]=x[L]}}else{L=x.length;while(L--){c[L]=x[L]}}return w};Eng.prototype.h=function(a,b,c,d,e,f,g,h,j){var t=Z(a),k,v,l=b,s,m,i=0,n=-1,o,p=h,q=j;for(k in a){v=a[k],m=null,o=0;if(f&&k!=f[i]){continue}if(g){n++,p=n,q=f?f[i]:i}if(c){t=Z(v)}b=W(l,0),b.push(k),s=V(b);if(t==3&&c){m=this.g(b),o=1}c?this.k(a,k,W(b,0),s,t,p,q):this.l(b,d,e);this.x[t]?null:this.h(v,b,c,d,e,m,o,p,q);i++}l=null,b=null};Eng.prototype.i=function(a,b){var c,d,e;for(c in a){d=a[c],e=Z(d),b&&b[c]?a[c]=b[c]:(e==4?this.i(d):a[c]="")}};Eng.prototype.j=function(a){var b,c,d;for(b in a){c=a[b],d=Z(c),d==4||d==3?this.j(c):a[b]="";delete a[b]}};Eng.prototype.k=function(a,b,c,e,f,y,z){var v=a[b],t=this,g=f,h,i,j,d=t.A;if(t.G&&t.G[e]){i=t.G[e];delete t.G[e];d.$_value=undefined,d.$_destroy=0,i(undefined,v,d),d.$_value==undefined?null:v=d.$_value,d.$_destroy?i=0:null}Object.defineProperty(a,b,{enumerable:true,configurable:true,set:function(s){if(t.G&&t.G[e]){i=t.G[e];delete t.G[e]}if(v!=s){g=Z(s);if(f==4){t.i(v,s),t.h(v,c,1)}else{if(f==3){h=W(c,0),t.j(v),v=s,j=t.g(h),t.h(v,h,1,0,0,j,1)}else{if(i){d.$_value=undefined,d.$_destroy=0,i(v,s,d),d.$_value==undefined?null:s=d.$_value,d.$_destroy?i=0:null}t.x[g]?(v=s,t.l(c,0,0,y,z)):null}}}},get:function(){return v}});t.x[g]?t.l(c,0,0,y,z):null};Eng.prototype.l=function(a,b,c,d,e){var f=this.m(a,b,c,d,e);if(f){this.n(f,a,c)}};Eng.prototype.m=function(b,c,e,f,g){if(!b){return}var t=this,L=b.length,i=0,d,a,h=c?c:t.t;while(i<L){if(!(h&&b)){return false}h=h[b[i]];if(i==L-2){d=h}i++}if(h&&(h.$_index||h.$_value)){d=h}if(d){t.K=f,t.L=g,a=W(b,0);if(d.$_index){a[L-1]="$_index",t.n(d.$_index,a,e)}if(d.$_value){a[L-1]="$_value",t.n(d.$_value,a,e)}}return h};Eng.prototype.n=function(a,b,c){var L=a.length,d;while(L--){d=a[L];if(d.$_d){d.$_d.textContent=this.p(b,d.$_a,d.$_b,c)}if(d.$_e){this.o(d.$_e,b,d.$_f,c)}if(d.$_h){d.$_h.innerHTML=this.q(b,b[b.length-1],c)}}};Eng.prototype.o=function(a,b,d,e){var v=this.q(b,d[0],e),f=d[1],g,c,h,L=d.length,i,y;switch(L){case 2:i=1,c=v;break;case 4:v?i=1:null,c=d[2],h=d[3];break;case 6:f=d[2],g=d[1],g==0?(v==d[3]?i=1:null):null,g==1?(v>=d[3]?i=1:null):null,g==2?(v<=d[3]?i=1:null):null,g==3?(v>d[3]?i=1:null):null,g==4?(v<d[3]?i=1:null):null,c=d[4],h=d[5];break;default:return}f?f=f.toLowerCase():null;if(f=='class')y=' ';if(f=='style')y=';';if(L>2&&y){v=a.getAttribute(f),v?(v=v.replace(y+(i?h:c),'').trim()):null,v?(v=v+y+(i?c:h)):(v=y+(i?c:h)),a.setAttribute(f,v)}else{a.setAttribute(f,i?c:h)}};Eng.prototype.p=function(a,b,c,d){var L=b.length,e,v,f=W(c,0);while(L--){e=c[b[L]],v=this.q(a,e,d),f[b[L]]=v}return V(f,1)};Eng.prototype.q=function(a,v,b){var t=this,a=a,L=a.length,i=0,d,c=b?b:t.z;if(v=="$_index"){return t.K}while(i<L){i!=L-1?c=c[a[i]]:c=c[v];if(c==undefined){break}if(i==L-2){d=c}i++}if(v=="$_value"){return d[t.L]}c==undefined?c="":null;return c}}());console.warn("version: eng_0.8.1");var $_app=new Eng({el:document.getElementById("$_app"),data:{p:[{m:"简介",s:"",c:["关于作者","说明","Eng的原理"]},{m:"版本说明",s:"",c:["0.8 能做什么"]},{m:"API",s:"display:block",c:["示例","e-base","e-attr","e-html","e-id","e-for","el","watcher","watcherFor","$_watcher","$_watcherFor","$_setToSelf","$_setToGlobal"]},{m:"进阶/技巧",c:["一个数据表","一个日历插件"]},{m:"版本进度",c:["0.8基本待完善","1.0全功能搁置","服务端支持搁置"]},{m:"版本前瞻",c:["概要"]},]}});var $_eng_data={"示例":{a:"<div id='app'>\r   <p>{{value}}</p>\r</div>",b:"var app=new Eng({\r       el:document.getElementById('app'),\r       data:{ \r              value:'Hello Eng'\r             }\r});\r\r// 尝试在下方控制台修改app.value的值.\r// 例: app.value='Nice to meet Eng' 回车执行",c:""},"e-base":{a:"<div id='app'>\r    <div e-base='base1'>\r        <p>{{value}}</p>\r        <div e-base='base2'>\r           <p>{{value}}</p>\r        </div>\r    </div>\r</div>",b:"var app=new Eng({\r     el:document.getElementById('app'),\r     data:{\r          base1:{\r                 value:'我是基于 base1 的value值',\r                 base2:{\r                     value:'我是基于 base2 的value值'\r                        }\r                 }   \r           }\r});\r\r// 尝试在下方控制台修改app的值\r// 例如: app.base1.value=1234567  回车执行",c:"#   e-base=baseName指令所在标签下所有子元素的值, 都是基于当前baseName.\r\r#   {{baseName.value}} 这种写法是在Eng 中任何地方都是非法且不允许的, 今后也永远不会支持.\r\r#   作者认为这是散漫又不严谨的数据结构设计行为.不符合Eng '惯性逻辑思维' 的思想(数据结构 与 dom树结构 完全匹配 )"},"e-attr":{a:"<div id='app'>\r   <div e-attr='class=v0'> txt </div>\r   <div e-attr='class=v1?(css1):(css2)'> txt </div>\r   <div e-attr='class=v2>=10?(css1):(css2)'>txt </div>\r   <div e-attr='class=v0;tittle=v3;atr=v2>=10?(css1):(css2)'> txt </div>\r</div>",b:"var app=new Eng({\r      el:document.getElementById('app'),\r      data:{\r            v0:'css0',\r            v1:true,\r            v2:9,\r            v3:'this is tittle'   \r           }\r});",c:"#   e-attr 指令支持多个表达式, 所有行内属性\r\r#   其中三目运算是替换操作 ,另一个是覆盖操作\r\r#   当前版本中 (...) 外不能有多余的 空格 ' '\r\r#   当前版本中 (...) 内不能有其它 分号 ';'"},"e-html":{a:" <div id='app'>\r     <div e-html='v'>\r     </div>\r </div>",b:"var app=new Eng({\r     el:document.getElementById('app'),\r     data:{ \r           v:'<p>DOM 文本</p>'\r          }\r});",c:"#  e-html 指令下的子元素, 如包含有其它指令, 都不会被执行",},"e-id":{a:"<div id='app'>\r   <button e-id='idName' >Click me</button>\r</div>",b:"var app=new Eng({\r     el:document.getElementById('app'),\r     data:{},\r     created:function(eng){\r       // idName = idName.\r       eng.idName.onclick=function(){\r            alert('click me');\r       };\r    }    \r});",c:"#   e-id 指令不支持在e-for 循环内 ,以及 $_setToSelf和$_setToGlobal中使用;\r\r#   e-id=name  ,  name命名唯一",},"e-for":{a:"<div id='app'>\r  <div>\r    <p e-for='for1'>\r        index = {{$_index}}  value= {{$_value}}\r    </p>\r  </div>\r  <br>\r  <eng>\r    <p e-for='for2'>\r        index = {{$_index}} .... {{v}}\r    </p>\r  </eng>\r  <br>\r  <eng>\r    <div e-for='for3'>\r             {{v}}\r       <div e-for='for4' style='margin-left: 30px'>\r             {{v}}\r       </div>\r     </div>\r   </eng>\r</div>",b:'var app=new Eng({\r     el:document.getElementById("app"),\r     data:{ \r         for1:["a","b"],\r         for2:[\r               {v:"a"},\r               {v:"b"},\r              ],\r         for3:[\r               {\r                v:"I\'m for3 0",\r                for4:[\r                     {v:"I\'m for4 0"},\r                     {v:"I\'m for4 1"}\r                     ]\r               },\r              {\r                v:"I\'m for3 1",\r                for4:[\r                     {v:"I\'m for4 2"},\r                     {v:"I\'m for4 3"}\r                     ]\r               } \r              ]     \r       }\r});',c:"#    Eng 为适应动态的 DOM 变化交互场景, 所有for元素都依赖其父元素进行定位.在没有确定的父标签,又需要确定的填充位置时,建议统一使用 <eng></eng>做为父标签包裹,同理也可以作为e-base的base父元素\r\r#    e-for=name , 如果要使用 watcherFor 过滤器的话, 为了快速定位for对象,'name' 的命名在所有 for 对象中必须具有 唯一性 ;不打算使用过滤器,则所有合法的命名均适用.",},"el":{a:"",b:"var domStr='<p>{{v}}</p>';\r\rvar app=new Eng({\r     el:domStr,\r     data:{ \r        v:'我还支持 dom 文本数据模板'\r     },\r     created:function(eng){\r        document.getElementById('html').appendChild( eng.$_el );\r     }\r});",c:"\r#    el 既支持 dom节点 也支持 dom文本,生成的 dom 对象 在created(e)内,以参数 e.$_el获取",},"watcher":{a:"<div id='app'>\r  <p>{{v1}}</p>\r  <div e-base='base'>\r    <p>{{v2}}</p>\r  </div>\r</div>",b:"var app=new Eng({\r       el:document.getElementById('app'),\r       data:{ \r             v1:123,\r             base:{ v2:456 }\r             },\r        watcher:{\r                'v1':function(oldValue,newValue,eng){\r                     if(newValue==123){\r                     eng.$_value='v1 的值 ,被修改了';\r                     }\r                  },\r                'base.v2':function(oldValue,newValue,eng){\r                        if(newValue==456){\r                          eng.$_value='base.v2 的值 ,被修改了';\r                         }\r                  }       \r               }\r});",c:"#    eng.$_value              //修改要输出的值 \r\r#    eng.$_destroy=true;      //销毁该 watcher 对象.",},"watcherFor":{a:"<div id='app'>\r  <eng>\r    <p e-for='for1'>\r       index = {{$_index}}   value = {{$_value}}\r    </p>\r  </eng>\r  <br>\r  <eng>\r    <p e-for='for2'>\r       index = {{$_index}}   value = {{v}}\r     </p>\r  </eng>\r</div>",b:"var app=new Eng({\r      el:document.getElementById('app'),\r      data:{ \r           for1:[0,1,2,3,4,5],\r           for2:[\r                 {v:0}, {v:1}, {v:2}, {v:3}, {v:4}, {v:5}\r                 ]\r            },\r      watcherFor:{\r                   for1:function(eng){\r                       if(eng.$_data % 2 == 0){\r                           eng.$_allow=false;\r                        };\r                   },\r                   for2:function(eng){\r                        if(eng.$_data.v % 2 == 1){\r                             eng.$_allow=false;\r                        };\r                   },\r       },\r       created:function(eng){\r            // eng.$_watcherFor({\r            //    for1:null   //再次注册为 null, 用于销毁已注册的过滤器 \r            // });\r                   \r      }\r})",c:"#    之前提到过如果要使用该过滤器 ,为了快速定位for对象 ,for 对象 的命名必须具有唯一性.\r\r#    eng.$_watcherFor( {  for1:null } ) 再次注册为null,用于销毁已注册的过滤器",},"$_watcher":{a:"\r<p id='app'>{{v}}</p>",b:"var app=new Eng({\r     el:document.getElementById('app'),\r     data:{\r          v:'这是初始值,注册watcher后,再次修改才能触发条件,setTimeOut 3秒后触发'\r          },\r     created:function(eng){\r         eng.$_watcher({\r            'v':function(oldValue,newValue,eng){\r                if(newValue==123){\r                  eng.$_value='$_watcher注册的watcher,再次修该数据时,才生效';\r                };       \r             }\r         })\r     }\r});\r\r$_set=setTimeout(function(){\r           app.v=123\r},3000)",c:"#    eng.$_watcher() 用法等同于 watcher  ,注册后 修改数据时才生效",},"$_watcherFor":{a:"<div id='app'>\r  <p e-for='for1'>{{$_value}}</p>\r</div>",b:"var app=new Eng({\r     el:document.getElementById('app'),\r     data:{\r          for1:[0,1,2,3,4,5,6,7,8]\r     },\r     created:function(eng){\r        eng.$_watcherFor({\r           'for1':function(eng){\r                if(eng.$_data % 2 == 1){\r                     eng.$_allow=false;\r                };      \r            }\r        })\r    }\r});\r\r$_set=setTimeout(function(){\r   app.for1=[0,1,2,3,4,5,6,7,8];\r   throw '\\n\\n$_watcherFor注册 watcherFor 关系后,再次修改数据时生效'\r},2000);",c:"#    eng.$_watcherFor() 用法等同于 watcherFor , 修改数据时生效",},"$_setToSelf":{a:"",b:'  var app=new Eng({\r        el:null,\r        data:{},\r          created:function(eng){\r            var data={\r                       v : "$_setToSelf是一次性的,不支持数据绑定"\r                      };\r            var domOrStr= \'<p e-attr="title={{v}}"> {{v}} </p>\';\r\r            var dom=eng.$_setToSelf( data , domOrStr );\r\r                document.getElementById("html").appendChild(dom);   \r             }\r  });\r  throw "\\n\\neng.$_setToSelf不支持数据绑定:\\napp.v = "+app.v;',c:"#    data: 合法的json数据\r#    domOrStr: dom节点 或 dom文本 , 不支持写入 e-id 和 e-for 指令,其它均支持\r#    生成的数据是一次性的, 不支持数据绑定",},"$_setToGlobal":{a:"",b:"var app=new Eng({\r       el:null,\r       data:{},\r       created:function(eng){\r          var data={\r                    v:'$_setToGlobal不是一次性的,支持数据绑定'\r                    };\r          var domOrStr = '<p e-attr=\"title={{v}}\"> {{v}} </p>';\r          var dom=eng.$_setToGlobal({\r                          el:domOrStr,\r                          key:'base',\r                          data:data,\r                          base:'',\r                  });\r                 document.getElementById('html').appendChild(dom);    \r             }\r });\rthrow '\\n\\n$_setToGlobal支持数据绑定:\\napp.base.v = '+app.base.v;",c:"#    el:   dom 节点或文本 ,     暂不支持写入e-id 和e-for 指令,其它均支持;\r#    data: 合法的json 对象\r#    key:  data写入全局数据的 key 值命名\r#    base: 数据存储的位置 ,写法例:'base','base1.base2',忽略则添加到数据根目录\r#    已上三者的关系 等价于:   app.base.key=data;\r#    支持数据绑定",},"default":{a:"",b:"",c:""},"说明":{a:"\r\rEng 取自 engine 的缩写,寓意可以向 引擎 一样快而简的将 '数据结构' 与 'dom结构' 紧密的契合驱动,以 '惯性思维' 的方式,在大多数场景下化繁就简的处理数据及dom交互.\r\rEng 是组件化的解决方案,  目前仅有 11kb ,只有5个基本指令,5个 选项方法,就可以实现 angular, vue 和 react等, 前端工具常用功能\r\rEng 拥有不逊色于所有同类工具的优异性能,以及最低的学习曲线.",b:"",c:"",d:1},"关于作者":{a:"\r\r作者是个有想法的人. 不屑一切将事情复杂化的东西或人.\r\r作者怀疑一切, 甚至自己, 所以不相信走的每一步都是站在巨人的肩膀上, 完全有可能掉到前人制造的大山的山旮旯里坐井观天.\r\r作者认为能用极少的代码将复杂的事情, 通俗的表述到外行人都能理解明白的coder, 才是真正大牛. 否则也只能是曲高和寡的孤芳自赏 或者  勤奋的学渣.\r\r作者认为观察事物的角度, 接触事物的深度, 思考问题的方式, 以及对权威的盲从, 思考的惰性会让我们对同一件事物产生不同的解决方案.  如果!! 我们有自己的思想 ,不是继承或被格式化而来的话",b:"",c:"",d:1,},"0.8 能做什么":{a:"\r\rEng 0.8版本只有5个基本指令和5个选项方法.但却是页面所有基本操作的核心.\r\r虽然个别使用场景下,欠缺基本支持,但已经可以实现大多数场景下的数据渲染以及相关插件的开发,所以0.8将会是个独立版本.\r\r当然如果你对Eng理解深刻 ,对前端有想法,并有一定的动手能力 ,围绕这10个基本指令选项和方法,已然可以实现angular,vue和react的所有功能,包括数据双向绑定.\r\rEng 之后版本的功能, 以及服务端的支持,将会在 '版本前瞻' 中说明.",b:"",c:"",d:1},"一个数据表":{a:"",b:"",c:""},"一个日历插件":{a:"",b:"",c:"",},"0.8基本待完善":{a:"\r\r目前 watcher方法,不能直接监控 input 标签类型, 将补充",b:"",c:"",d:1},"1.0全功能搁置":{a:"\r\r筹备ing",b:"",c:"",d:1},"服务端支持搁置":{a:"\r\r筹备ing",b:"",c:"",d:1},"概要":{a:'\r\r1.后续,将会提供一个sever端的插件,支持将dom文本压缩成 Eng 可以识别的json对象,减少网络数据传输,加速dom和数据的首次生成渲染效率\r\r2.将 支持 "组件active行为", 允许单独在页面内定义组件对象, Eng 会向服务端 或 本地 请求该对象的所有素材,生成完整的组件..\r\r3.$_setToGlobal()和 $_setToSelf 将有可能将支持 写入e-id 和e-for 指令,如果有必要的话 \r\r4.将 支持数据分页\r\r5.将 支持数据 撤销 重做操作, 允许记录一定步数的数据操作\r\r6.将 支持 数据比对,仅提交已修改的数据,减少服务器端重复计算(有必要的话)',b:"\r7.下个版本有可能兑现已上大部分功能\r\r8.Eng 的本地端体积,最终将会控制在 20kb左右或以内",c:"",d:1},"由来":{a:"\r\r为了防止作者认为简单的前端世界复杂化,以后的工作环境恶化\r\r为了防止今后求职被问你会XXX?\r\r作者java出道,直奔前端就是因为前端自由,没有强制 思想 上的流水线标准化洗脑.\r\r实时上,前端框架作者只认可jquery.既不在巨人的肩膀上破坏对js的基本语法思维的理解方式, 也不推行制造任何标准化思想 ",b:"",c:"",d:1},"Eng的原理":{a:"\r\rEng不制定任何标准化, 仅提供的基本的使用规则.\r\rEng的使用完全遵循页面dom渲染逻辑规则,并在形式上匹配",b:"\r\r作者认为:大部分插件的编写, 如果能够基于其使用环境的内在既有逻辑规律, 设计相应的 逻辑和dom 结构, 将会极大的简化编写 复杂程度 和 使用难度..\r\r待解决事物的 逻辑上的复杂是'客观'存在的, 但解决方案的复杂程度是'主观'上的. \r\r任何新的开发生产工具, 都应该制定符合其所在环境既有的最高效的'惯性思维'处理方式, 从而忽略生产工具上的复杂,将重点放在解决事物的'客观'复杂上.\r\rEng的核心逻辑就是严格的基于既有的dom渲染逻辑规则, 所有的数据逻辑和dom关系大多是一次生成的, 也就是说后续所有升级新特性的支持, 将不会出现全家桶等额外组件.",c:"",d:1},};var $_set;var $_inint=function(){var p=document.getElementsByClassName("ppp");var c=document.getElementsByClassName("cul");var btn=document.getElementsByClassName("btn");var htm=document.getElementsByClassName("hinput");var L=p.length;while(L--){p[L].index=L;if(L==2){p[L].openFlag=1,p[L].style.color="blue"}p[L].onclick=function(){var a,b,t=this;t.openFlag?(a="none",b="black",t.openFlag=0):(a="block",b="blue",t.openFlag=1);c[t.index].style.display=a;p[t.index].style.color=b};if(c[L]){c[L].onclick=function(e){var n=e.target.tagName,txt;if(n=="LI"){txt=e.target.textContent.trim();if(!$_eng_data[txt]){return}clearTimeout($_set);s[0].value=$_eng_data[txt].a;s[1].value=$_eng_data[txt].b;s[2].value="";htm[2].value=$_eng_data[txt].c;if(!$_eng_data[txt].d){btn[0].click()}}e.stopPropagation()}}}var s=document.getElementsByClassName("r-r");var kF;L=3;while(L--){s[L].index=L;s[L].onfocus=function(){if(this.index==2){kF=1;if(err){err=0;s[2].style.color="blue";s[2].value=""}}};s[L].onblur=function(){if(this.index==2){kF=0}}}var cache,cache2,err;btn[0].onclick=function(){htm[0].innerHTML=s[0].value.trim();if(cache){cache.parentNode.removeChild(cache)}cache=document.createElement("script");cache.textContent=s[1].value.trim();document.body.appendChild(cache);htm[1].value=htm[0].innerHTML};document.body.onkeydown=function(e){if(e.keyCode==13&&kF){if(cache2){cache2.parentNode.removeChild(cache2)}cache2=document.createElement("script");cache2.textContent=s[2].value.trim();s[2].value="";document.body.appendChild(cache2)}};window.onerror=function(m,u,l){s[2].style.color="red";s[2].value=m.replace("Uncaught","");err=1}};$_inint();